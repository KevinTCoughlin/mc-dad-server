# Parkour Maps & Rotation

Your server comes with parkour plugin support and a curated set of free maps from [Hielke Maps](https://hielkemaps.com).

## Install Pre-built Maps

```bash
bash scripts/setup-parkour-maps.sh
```

Or preview what will be downloaded:

```bash
bash scripts/setup-parkour-maps.sh --dry-run
```

Custom server directory:

```bash
bash scripts/setup-parkour-maps.sh --dir /path/to/server
```

## Map Catalog

| World | Description | Difficulty |
|-------|-------------|------------|
| `parkour-spiral` | Themed tower climb | Beginner |
| `parkour-spiral-3` | Larger tower, multiple difficulty ranks, easter eggs | Intermediate |
| `parkour-volcano` | Escape an active volcano | Intermediate |
| `parkour-pyramid` | Giant pyramid full of parkour | Mixed |
| `parkour-paradise` | 100 bite-sized parkour levels | Mixed |

All maps use built-in command block systems for checkpoints and timing — no extra plugin setup needed.

## Playing

Teleport to any map in-game:

```
/mv tp parkour-spiral
/mv tp parkour-volcano
/mv tp parkour-paradise
```

## Map Rotation

Keep things fresh by rotating the featured map automatically. The `rotate-parkour.sh` script cycles through maps, broadcasts the new featured map, and teleports players.

### Generated by the installer

After install, you'll find `rotate-parkour.sh` in your server directory. Run it manually:

```bash
bash ~/minecraft-server/rotate-parkour.sh
```

### Automate it

**Linux (cron)** — rotate every 4 hours:

```bash
0 */4 * * * /usr/bin/env bash ~/minecraft-server/rotate-parkour.sh >> ~/minecraft-server/logs/rotation.log 2>&1
```

**macOS (launchd)** — create `~/Library/LaunchAgents/com.mc-dad-server.parkour-rotation.plist`:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.mc-dad-server.parkour-rotation</string>
    <key>ProgramArguments</key>
    <array>
        <string>/bin/bash</string>
        <string>/Users/YOU/minecraft-server/rotate-parkour.sh</string>
    </array>
    <key>StartInterval</key>
    <integer>14400</integer>
</dict>
</plist>
```

Load it:

```bash
launchctl load ~/Library/LaunchAgents/com.mc-dad-server.parkour-rotation.plist
```

### How rotation works

1. Reads current map index from `rotation-state.txt`
2. Advances to the next map (wraps around)
3. Broadcasts the new featured map to all players
4. Teleports players from the previous map to the new one
5. Writes updated index back to state file

## Adding More Maps

1. Download a map zip from Hielke Maps (or anywhere)
2. Extract to `~/minecraft-server/<name>/` (no spaces in folder name)
3. In-game or via console: `mv import <name> normal`
4. Add the name to `PARKOUR_MAPS` in `rotate-parkour.sh`

Or add it to the arrays in `scripts/setup-parkour-maps.sh` and re-run.

## Building Custom Courses

The Parkour plugin lets you build your own courses:

```
/mv tp parkour              # go to parkour world
/pa create MyCourse         # start a course at your position
/pa checkpoint              # add checkpoint where you stand
/pa finish                  # set finish line
/pa ready MyCourse          # mark it playable
```

Players join with `/pa join MyCourse` and see leaderboards with `/pa leaderboard MyCourse`.
